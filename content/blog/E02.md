+++
Description = "Setting Up a New Pi4 Server"
Date = 2021-03-11T08:21:46-06:00
PublishDate = 2021-03-11T08:21:46-06:00 # this is the datetime for the when the epsiode was published. This will default to Date if it is not set. Example is "2016-04-25T04:09:45-05:00"
title = "Getting Started with a New Server"
#blog_banner = ""
blog_image = "img/episode/default.jpg"
images = ["img/episode/default-social.jpg"]
#Author = ""
#aliases = ["/##"]
draft=true
+++
### Using an SSD
I have heard people talk about using an external USB drive rather than a SD card with the Pi4. This was kinda hacky a year or so ago but apparently things have been ironed out. In order to do this, you need to flash the latest RaspberryPiOS and update the firmware first. After that, you should be good to go to use an external drive (or so I assumed)

I tried flashing Ubuntu Server 20.04 using Etcher but when booting, I was getting an error that ethernet wasn't being dectected. I had a cable hooked up so I thought that maybe it was a bad flash. Did it again and got the same error. 

So then I switched to the RaspberryPi Imager app and repeated the proccess but let the app download the image and flash it. This time it dectected ether net, but didn't recognize a boot environment variable.

**Arg**

So now I went to google and searched for the specific error and came across [this forum post](https://www.raspberrypi.org/forums/viewtopic.php?t=295609). Apparently, this is a know *issue* with 20.04 and it's debatable as to where it can be classified as a *bug* or not. The *solution* is to use 20.10, which I **DIDN'T** want but I guess I am out of options if I want to use an Ubuntu based server.

After reading this, I repeated the process with RaspberryPi Imager and chose Ubuntu Server 20.10 (64 bit). So far, this process has taken about ~45 minutes just to try to get the Pi to boot. 

After plugging it in and booting <details> <summary>SPOILER WARNING</summary> I still didn't have a booting pi.

### *Sigh*

</details>

### Round 2

Without clicking the **spoiler tag** you can guess my result. This time, I used RPImager to format, then flash. But in my haste I must have selected the DESKTOP image and not the server. But, guess what? It booted into the desktop so I guess that's a win? Back to reformat and flashing the correct image.

### Round 3
Give me a break!!!! Still won't work. TONS of errors in the output. Network time, network services, login, availability of block devices, etc.

Tried RaspberryPiOS and it locked out to a read only file system.

(ノಠ益ಠ)ノ彡┻━┻

Tried RaspberryPiOS again, but this time, I plugged it into a USB 2.0 slot.

**it worked**

(o_O)

So then I did Ubuntu 20.10 again and plugged it into a USB 2.0 slot.

**it worked**

( ͠° ͟ʖ ͡° )

### Welcome to Ubuntu 20.10
Ok. So now I got Ubuntu up and running from the SSD on a USB 2.0 port. Time to make a new user.
I did the typical `useradd rastacalavera` and `chmod -a -G sudo rastacalavera` and figured everything was good.

**NO. It wasn't all GOOD**

When I logged back in, there was no home directory and my user wasn't using BASH. What the hell? Did something change recently? I recall when adding users in the past there was this whole interactive prompt where it wanted a room number and stuff like that. This method didn't even give my user a password! I must be missing something. . . 

So I logged back in as Ubuntu and gave my user a password allowed my user to use the BASH shell (easy google search shows how to do this).

### Finally Ready to Go
Ok, time to start my project. I headed over to [Linux Server](docs.linuxserver.io) to jump right into their documentation. I have used this in the past and would like to see a disclaimer that their guides assumes that you already have Docker and Docker-Compose installed on your machine. A lot of people who are getting into this are probably told to use images from Linux Server, but if they are complete noobs there are some crucial steps missing from their docs. So I think either they should include a disclaimer or add that information into the documentation.

### Things to submit to LS.io
I think a pull request should be made to the `General` section of their documentation. Something like this:
> Are you completely new to Docker? If so, please see the [official documentation](https://docs.docker.com/engine/install/) on how to properly install docker for your OS. Be sure to follow the the **Post Installation** directions as well to make sure your user can execute docker commands.

I think it is probably out of scope for the project to walk a user through the installation steps and it's appropriate to focus on just the service they provide.

### Setting up Docker
So for my Ubuntu Installation I did the following steps:
1. `sudo apt install docker.io docker-compose`
2. `sudo usermod -aG docker rastacalavera`

Now my user should be set and I should be good to blindly follow the LS.io documentation.

### Let's Go! 
![](img/walk.gif)

